---
name: subagent-creator
description: サブエージェントを生成するエージェントスキル
allowed-tools: Read, Write, Edit
---
# Subagent Creator

## 概要

ユーザーから提供された要件に基づき、プラグイン構築ルールに準拠したサブエージェント定義（Markdown形式）を生成します。

## 実施内容

### 1. テンプレートの読み込み

- [サブエージェントテンプレート](./templates/subagent-template.md) を読み込む

### 2. 対話による要件収集

**初期ヒアリング:**

```markdown
【サブエージェント作成】
作成したいサブエージェントの目的や、解決したい課題について教えてください。

例:
- セキュリティチェックを担当するエージェント
- ドキュメント生成を自動化するエージェント
```

- ユーザーの回答に基づき、以下の情報を分析:
  - 対象ドメイン領域
  - 主な責任範囲
  - 必要となるツールセット
  - 関連する制約事項
  
### 3. 実装計画の作成

収集した情報を基に、以下の実装計画を作成：

#### 3.1 エージェント名の検討

- 命名規則: `<ドメイン名>-agent`
- 命名規約に基づき、エージェント名称の候補を選定します
- 複数案（目安：3案）を提示する
- 最適案が明確な場合は1案に集約することも可能

#### 3.2 役割の検討

- サブエージェントの役割（Role）を検討する
- 1～2文程度の1段落で、簡潔な役割を作成する

#### 3.3 責任範囲の検討

- **責任範囲内:**
  - 担当する項目をリストアップ
  - ドメイン領域に適した具体的な責任を定義
- **責任範囲外:**
  - 担当しない項目をリストアップ
  - 他のエージェントが担当すべき領域を明示

#### 3.4 使用ツールの検討

- 責任範囲に基づいて必要なツールを選定
- **以下から適切なツールセットを提案:**
  - 基本セット: Read, Write, Edit, Bash
  - 開発セット: Read, Write, Edit, MultiEdit, Grep, Glob, Bash
  - 完全セット: Read, Write, Edit, MultiEdit, Grep, Glob, LS, Bash, Task, Agent, NotebookEdit, WebFetch, WebSearch

#### 3.5 表示色の検討

- エージェントの性質に応じた色を検討する:
  - セキュリティ系: Red
  - 開発・ビルド系: Blue
  - 分析系: Purple
  - ドキュメント系: Green
  - テスト系: Yellow

#### 3.6 注意事項の検討

- 運用上重要な注意事項を複数件検討
- 責任範囲に関連する注意点を明記

### 4. 実装計画の提示と承認

- 作成した実装計画を要約して提示

対話フォーマット:

```markdown
【サブエージェント実装計画】

1. エージェント名
A: [候補1]
B: [候補2]
C: [候補3]
推奨: [候補1] - [簡潔な理由]

2. 役割
[提案する役割説明]

3. 責任範囲
責任範囲内: [i]件
- [項目1]
- [項目2]
- [項目3] 

責任範囲外: [j]件
- [項目1]
- [項目2]

4. ツール・設定

ツール: [提案するツールセット名] - [理由]
  ※選択可能: 基本セット / 開発セット / 完全セット

色: [提案する色] - [理由]
  ※選択可能: Red / Blue / Purple / Green / Yellow


5. 注意事項: [k]件
- [項目1]
- [項目2]
- [項目3] 

この内容で作成してよろしいですか？

A. 承認（作成を開始）
B. 修正（変更したい項目を指定）
```

対話フォーマットの例:

```markdown
【サブエージェント実装計画】

1. エージェント名
A: security-checker-agent
B: security-audit-agent
C: code-security-agent

推奨: security-checker-agent - 目的が明確で簡潔

2. 役割
アプリケーションコードのセキュリティ脆弱性を検出し、既知の脆弱性パターンとの照合を行います。検出結果をレポート形式で提供し、開発者が修正すべき箇所を明示します。

3. 責任範囲
責任範囲内: 4件
- コード内のセキュリティ脆弱性パターンの検出
- 依存ライブラリの既知脆弱性チェック
- 機密情報のハードコード検出
- セキュリティチェック結果のレポート生成

責任範囲外: 3件
- 脆弱性の自動修正（開発エージェントが担当）
- ネットワークレベルのセキュリティ設定（インフラ範囲外）
- 実行時の動的セキュリティ監視（運用範囲外）

4. ツール・設定

ツール: 開発セット - ファイル検索と複数ファイルの分析が必要なため
  ※選択可能: 基本セット / 開発セット / 完全セット
  
色: Red - セキュリティ関連タスクを視覚的に識別しやすくするため
  ※選択可能: Red / Blue / Purple / Green / Yellow


5. 注意事項: 3件
- 検出結果は警告レベルで報告し、誤検出の可能性を考慮する
- 機密情報を含むログやレポートは生成しない
- 静的解析のみを行い、コードの実行は行わない

この内容で作成してよろしいですか？

A. 承認（作成を開始）
B. 修正（変更したい項目を指定）
```

- Aの場合: そのまま作成に進む
- Bの場合: 修正したい項目を聞いて更新

### 5. 修正対応（必要な場合）

- ユーザーの修正指示に基づいて計画を更新
- 修正後の計画を再提示
- 承認されるまで繰り返し

### 6. テンプレートの適用

- 承認された実装計画をテンプレートに適用
- フロントマター（name, description, tools, model, color）を生成
- 各セクションを構造化して記述

## 出力

- 生成されたサブエージェント定義

## チェックリスト

- [ ] 他のサブエージェント・エージェントスキルに依存していない
- [ ] 環境依存情報を含めていない（URL、テンプレート以外のファイルパス）
- [ ] 機密情報を含めていない
- [ ] 責任範囲内と責任範囲外は明確に区別して記述している
- [ ] 責任範囲内の項目が具体的かつ測定可能である
- [ ] 使用ツールが責任範囲を実現するために必要十分である
- [ ] 注意事項が実運用で遵守可能である
